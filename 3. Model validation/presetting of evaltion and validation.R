source('/code/signatureScore.R')
source('/code/getTotalGene.R')
source('/code/ROC_CI_global.R')
source('/code/globalEval.R')
source('/code/HGClinicalStatus.R')
source('/code/plotSurvivalRoc.R')
source('/code/sstselfEvalUMContinue.R')
source('/code/selfEval.R')
source('/code/sstselfEvalUM.R')
source('/code/unicoxForestData.R')
source('/code/MulticoxForestData.R')
source('/code/sstselfEval.R')
source('/code/groupQ.R')
source('/code/createTable.R')
source('/code/ROC_CI.R')
source('/combineCoxResult.R')
source('/code/getSurvivalMatrix.R')
source('/code/plotSurvivalCurve.R')
source('/code/getSurvivalMatrix1.R')
source('/code/group.R')
source('/code/Digits4.R')
source('/code/getGlobalExp.R')
source('/code/getGlobalScore.R')
source('/code/getHeatmapExp.R')
library(rmeta)
library(ggplot2)
library(survminer)
library(survival)
library(survivalROC)
library(GEOquery)
library(Hmisc)
library(meta)
library(clusterProfiler)
library(pheatmap)
load("model_method.RData")
load("model_coefs1.Rdata")
load("datasets_nonscale.Rdata")
load("datasets_scale.Rdata")
load("ssgsea_out.Rdata")
load("ssgsea_out_test.Rdata")
load("ssgsea_out_all.Rdata")
load("ssgsea.out.independ.Rdata")
load("clinical.Rdata")
protectModelGene<-as.character(unlist(read.table("protectModelGene.txt",as.is=T)))
riskModelGene<-as.character(unlist(read.table("riskModelGene.txt",as.is=T)))
trainPo<-which(sapply(datasets_scale,ncol)>100)[-8]
testPo<-which(sapply(datasets_scale,ncol)<100)[-8]
independPo<-c(14,16)
riskModelGene[22]<-"SPART"
score<-structure(as.numeric(unlist(sapply(ssgsea.out,function(x){x[3,]}))),
                 .Names=as.character(unlist(sapply(ssgsea.out,colnames))))
medianScore<-median(score)
Q1score<--4786.0
Q3score<- -906.4
gene<-c(protectModelGene,riskModelGene)
score.test<-structure(as.numeric(unlist(sapply(ssgsea.out.test,function(x){x[3,]}))),
                      .Names=as.character(unlist(sapply(ssgsea.out.test,colnames))))
score.all<-structure(as.numeric(unlist(sapply(ssgsea.out.all,function(x){x[3,]}))),
                     .Names=as.character(unlist(sapply(ssgsea.out.all,colnames))))
score.test.independ<-structure(as.numeric(unlist(sapply(ssgsea.out.independ,function(x){x[3,]}))),
                               .Names=as.character(unlist(sapply(ssgsea.out.independ,colnames))))